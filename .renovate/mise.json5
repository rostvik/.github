{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  packageRules: [
    {
      description: "Auto-merge Mise Tools",
      matchManagers: ["mise"],
      automerge: true,
      automergeType: "branch",
      matchUpdateTypes: ["minor", "patch"],
      ignoreTests: true,
    },
    {
      description: "Mise GitHub: Use package name as user/org if no user/org",
      matchFileNames: [".mise.toml", "mise.toml"],
      matchDatasources: ["github-releases", "github-tags"],
      overridePackageName: "{{#if (lookup (split packageName '/') 1)}}{{packageName}}{{else if (lookup (split packageName ':') 1)}}{{ lookup (split packageName ':') 1 }}/{{ lookup (split packageName ':') 1 }}{{else}}{{packageName}}/{{packageName}}{{/if}}"
    },
    {
      matchFileNames: [".mise.toml", "mise.toml"],
      addLabels: ["renovate/mise"]
    }
  ],
  customManagers: [
    {
      customType: "regex",
      description: "Process npm packages in mise.toml",
      fileMatch: [".mise.toml", "mise.toml"],
      matchStrings: [
        "\"npm:(?<packageName>@[\\w\\-\\/]+)\" = \"(?<currentValue>[\\d\\.]+)\"",
        "\"npm:(?<packageName>[\\w\\-\\/]+)\" = \"(?<currentValue>[\\d\\.]+)\""
      ],
      datasourceTemplate: "npm",
      versioningTemplate: "semver"
    },
    {
      customType: "regex",
      description: "Process aqua and ubi packages in mise.toml",
      fileMatch: [".mise.toml", "mise.toml"],
      matchStrings: [
        "\"aqua:(?<packageName>[\\w\\-]+\\/[\\w\\-]+)\" = \"(?<currentValue>[\\d\\.]+|latest|v[\\d\\.]+)\"",
        "\"ubi:(?<packageName>[\\w\\-]+\\/[\\w\\-]+)\" = \"(?<currentValue>[\\d\\.]+|latest|v[\\d\\.]+)\""
      ],
      datasourceTemplate: "github-releases",
      versioningTemplate: "semver",
      extractVersionTemplate: "^v?(?<version>.*)$"
    }
  ]
}
